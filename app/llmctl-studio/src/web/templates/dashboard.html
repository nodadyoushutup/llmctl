{% extends "base.html" %}

{% block content %}
<section class="grid grid-3">
  <div class="card">
    <div class="card-header">
      <h2 class="section-title">Overview</h2>
    </div>
    <p class="muted" style="margin-top: 12px;">
      Track agent density, active load, and the last known run signal.
    </p>
    <div class="grid grid-2" style="margin-top: 20px;">
      <div class="stat-card">
        <p class="eyebrow">total</p>
        <p style="margin-top: 8px; font-size: 24px;">{{ summary.total }}</p>
      </div>
      <div class="stat-card">
        <p class="eyebrow">active</p>
        <p style="margin-top: 8px; font-size: 24px;">{{ summary.active }}</p>
      </div>
    </div>
    <div class="subcard" style="margin-top: 18px;">
      <p class="eyebrow">last run</p>
      <p style="margin-top: 8px;">{{ human_time(summary.last_run_at) }}</p>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h2 class="section-title">Newest Agents</h2>
    </div>
    <div class="stack" style="margin-top: 20px;">
      {% if recent_agents %}
        {% for agent in recent_agents %}
          <div class="row-between">
            <div>
              <p>{{ agent.name }}</p>
              <p class="muted" style="margin-top: 4px; font-size: 12px;">
                created {{ human_time(agent.created_at) }}
              </p>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <p class="muted">No agents created yet.</p>
      {% endif %}
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h2 class="section-title">Run Feed</h2>
    </div>
    <div class="stack" style="margin-top: 20px;">
      {% if recent_runs %}
        {% for agent in recent_runs %}
          <div class="subcard">
            <div class="row-between">
              <p>{{ agent.name }}</p>
            </div>
            <p class="muted" style="margin-top: 8px; font-size: 12px;">
              last run {{ human_time(agent.last_run_at) }}
            </p>
          </div>
        {% endfor %}
      {% else %}
        <p class="muted">No runs recorded yet.</p>
      {% endif %}
    </div>
  </div>
</section>

<section class="grid">
  <div class="card">
    <div class="card-header">
      <h2 class="section-title">Active Agents</h2>
    </div>
    <div class="stack" style="margin-top: 20px;">
      {% if active_agents %}
        {% for agent in active_agents %}
          <div class="subcard">
            <div class="row-between">
              <p>{{ agent.name }}</p>
            </div>
            <p class="muted" style="margin-top: 8px; font-size: 12px;">
              last run {{ human_time(agent.last_run_at) }}
            </p>
          </div>
        {% endfor %}
      {% else %}
        <p class="muted">No active agents right now.</p>
      {% endif %}
    </div>
  </div>
</section>
{% endblock %}
