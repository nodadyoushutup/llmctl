{% extends "base.html" %}

{% block action_header %}
  <div class="action-header-actions">
    <form
      method="post"
      action="{{ url_for('agents.delete_chroma_collection') }}"
      onsubmit="return confirm('Delete this collection from ChromaDB?');"
    >
      <input type="hidden" name="collection_name" value="{{ collection_name }}" />
      <input type="hidden" name="next" value="detail" />
      <button
        type="submit"
        class="icon-button icon-button-danger"
        aria-label="Delete collection"
        title="Delete collection"
      >
        <i class="fa-solid fa-trash"></i>
      </button>
    </form>
    <a class="btn btn-secondary" href="{{ url_for('agents.chroma_collections') }}">
      <i class="fa-solid fa-arrow-left"></i>
      back to collections
    </a>
  </div>
{% endblock %}

{% block content %}
<section class="card">
  <div class="card-header">
    <div>
      <h2 class="section-title">Collection Details</h2>
      <p class="muted" style="margin-top: 6px;">
        Chroma metadata for <span class="mono">{{ collection_name }}</span>.
      </p>
    </div>
    <span class="status status-idle">
      {{ chroma_host }}:{{ chroma_port }} ({{ chroma_ssl }})
    </span>
  </div>
  {% if chroma_normalized_hint %}
    <div class="alert alert-info" style="margin-top: 16px;">
      {{ chroma_normalized_hint }}
    </div>
  {% endif %}
  <dl class="meta-list" style="margin-top: 20px;">
    <div>
      <dt>Name</dt>
      <dd class="mono">{{ collection_name }}</dd>
    </div>
    <div>
      <dt>Documents</dt>
      <dd>{{ collection_count }}</dd>
    </div>
  </dl>
  <div class="stack" style="margin-top: 20px;">
    <div class="subcard">
      <p class="eyebrow">Metadata</p>
      <pre class="textarea" style="margin-top: 10px; min-height: 220px;">{{ collection_metadata_json }}</pre>
    </div>
  </div>
</section>
{% endblock %}
