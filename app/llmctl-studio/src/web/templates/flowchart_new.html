{% extends "base.html" %}

{% block topbar_actions %}
  <a class="btn btn-secondary" href="{{ url_for('agents.list_flowcharts') }}">
    <i class="fa-solid fa-arrow-left"></i>
    back to flowcharts
  </a>
{% endblock %}

{% block content %}
<section class="card">
  <div class="card-header">
    <h2 class="section-title">Create Flowchart</h2>
  </div>
  <p class="muted" style="margin-top: 12px;">
    Start with workflow metadata now. Add nodes and edges in the visual editor after creation.
  </p>
  <form method="post" action="{{ url_for('agents.create_flowchart') }}" class="form-grid" style="margin-top: 20px;">
    <label class="label">
      name
      <input type="text" name="name" placeholder="Release readiness" class="input" required />
    </label>
    <label class="label" style="grid-column: 1 / -1;">
      description (optional)
      <textarea name="description" class="textarea" placeholder="Flowchart for validating and shipping weekly release."></textarea>
    </label>
    <label class="label">
      max node executions (optional)
      <input
        type="number"
        name="max_node_executions"
        min="1"
        step="1"
        class="input"
        value="{{ defaults.max_node_executions or '' }}"
      />
    </label>
    <label class="label">
      max runtime minutes (optional)
      <input
        type="number"
        name="max_runtime_minutes"
        min="1"
        step="1"
        class="input"
        value="{{ defaults.max_runtime_minutes or '' }}"
      />
    </label>
    <label class="label">
      max parallel nodes
      <input
        type="number"
        name="max_parallel_nodes"
        min="1"
        step="1"
        class="input"
        value="{{ defaults.max_parallel_nodes }}"
        required
      />
    </label>
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <i class="fa-solid fa-plus"></i>
        create flowchart
      </button>
      <a class="btn btn-secondary" href="{{ url_for('agents.list_flowcharts') }}">
        <i class="fa-solid fa-arrow-left"></i>
        cancel
      </a>
    </div>
  </form>
</section>
{% endblock %}
